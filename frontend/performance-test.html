<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pruebas de Rendimiento - Tabla de Resoluciones</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      border-radius: 12px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      overflow: hidden;
    }

    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      text-align: center;
    }

    .header h1 {
      font-size: 28px;
      margin-bottom: 10px;
    }

    .header p {
      opacity: 0.9;
      font-size: 14px;
    }

    .content {
      padding: 30px;
    }

    .section {
      margin-bottom: 30px;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 8px;
      border-left: 4px solid #667eea;
    }

    .section h2 {
      color: #333;
      margin-bottom: 15px;
      font-size: 20px;
    }

    .test-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
      margin-top: 15px;
    }

    .test-card {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .test-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .test-card h3 {
      color: #667eea;
      margin-bottom: 10px;
      font-size: 16px;
    }

    .test-card p {
      color: #666;
      font-size: 13px;
      margin-bottom: 15px;
      line-height: 1.5;
    }

    .btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      transition: opacity 0.2s;
      width: 100%;
    }

    .btn:hover {
      opacity: 0.9;
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .btn-secondary {
      background: #6c757d;
    }

    .btn-success {
      background: #28a745;
    }

    .btn-danger {
      background: #dc3545;
    }

    .results {
      margin-top: 20px;
      padding: 15px;
      background: white;
      border-radius: 8px;
      border: 1px solid #dee2e6;
    }

    .results h3 {
      color: #333;
      margin-bottom: 10px;
      font-size: 16px;
    }

    .metric {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px solid #f0f0f0;
    }

    .metric:last-child {
      border-bottom: none;
    }

    .metric-label {
      color: #666;
      font-size: 13px;
    }

    .metric-value {
      color: #333;
      font-weight: 600;
      font-size: 13px;
    }

    .metric-value.good {
      color: #28a745;
    }

    .metric-value.warning {
      color: #ffc107;
    }

    .metric-value.bad {
      color: #dc3545;
    }

    .progress-bar {
      width: 100%;
      height: 4px;
      background: #e9ecef;
      border-radius: 2px;
      overflow: hidden;
      margin-top: 10px;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
      transition: width 0.3s ease;
    }

    .status {
      padding: 8px 12px;
      border-radius: 4px;
      font-size: 12px;
      font-weight: 500;
      display: inline-block;
      margin-top: 10px;
    }

    .status.running {
      background: #fff3cd;
      color: #856404;
    }

    .status.success {
      background: #d4edda;
      color: #155724;
    }

    .status.error {
      background: #f8d7da;
      color: #721c24;
    }

    .console-output {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 15px;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 12px;
      max-height: 400px;
      overflow-y: auto;
      margin-top: 15px;
    }

    .console-line {
      margin-bottom: 5px;
      line-height: 1.4;
    }

    .console-line.info {
      color: #4fc3f7;
    }

    .console-line.success {
      color: #81c784;
    }

    .console-line.warning {
      color: #ffb74d;
    }

    .console-line.error {
      color: #e57373;
    }

    .actions {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }

    .actions button {
      flex: 1;
    }

    @media (max-width: 768px) {
      .test-grid {
        grid-template-columns: 1fr;
      }

      .actions {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üöÄ Pruebas de Rendimiento</h1>
      <p>Sistema de Testing de Carga para Tabla de Resoluciones</p>
    </div>

    <div class="content">
      <!-- Secci√≥n de Pruebas de Carga -->
      <div class="section">
        <h2>üìä Pruebas de Carga de Datos</h2>
        <p style="color: #666; margin-bottom: 15px;">
          Prueba el rendimiento de la tabla con diferentes vol√∫menes de datos
        </p>
        
        <div class="test-grid">
          <div class="test-card">
            <h3>üîπ Dataset Peque√±o</h3>
            <p>50 resoluciones - Prueba b√°sica de funcionalidad</p>
            <button class="btn" onclick="runLoadTest('small')">Ejecutar Prueba</button>
            <div id="result-small"></div>
          </div>

          <div class="test-card">
            <h3>üî∏ Dataset Mediano</h3>
            <p>250 resoluciones - Uso t√≠pico del sistema</p>
            <button class="btn" onclick="runLoadTest('medium')">Ejecutar Prueba</button>
            <div id="result-medium"></div>
          </div>

          <div class="test-card">
            <h3>üî∂ Dataset Grande</h3>
            <p>1,000 resoluciones - Carga pesada</p>
            <button class="btn" onclick="runLoadTest('large')">Ejecutar Prueba</button>
            <div id="result-large"></div>
          </div>

          <div class="test-card">
            <h3>üî¥ Dataset Extra Grande</h3>
            <p>5,000 resoluciones - Prueba de estr√©s</p>
            <button class="btn" onclick="runLoadTest('xlarge')">Ejecutar Prueba</button>
            <div id="result-xlarge"></div>
          </div>
        </div>
      </div>

      <!-- Secci√≥n de Pruebas de Filtros -->
      <div class="section">
        <h2>üîç Pruebas de Rendimiento de Filtros</h2>
        <p style="color: #666; margin-bottom: 15px;">
          Mide el tiempo de ejecuci√≥n de diferentes tipos de filtros
        </p>
        
        <div class="test-grid">
          <div class="test-card">
            <h3>Filtro Simple</h3>
            <p>B√∫squeda por n√∫mero de resoluci√≥n</p>
            <button class="btn" onclick="runFilterTest('simple')">Ejecutar</button>
            <div id="result-filter-simple"></div>
          </div>

          <div class="test-card">
            <h3>Filtro M√∫ltiple</h3>
            <p>Combinaci√≥n de varios filtros</p>
            <button class="btn" onclick="runFilterTest('multiple')">Ejecutar</button>
            <div id="result-filter-multiple"></div>
          </div>

          <div class="test-card">
            <h3>Filtro de Rango</h3>
            <p>B√∫squeda por rango de fechas</p>
            <button class="btn" onclick="runFilterTest('range')">Ejecutar</button>
            <div id="result-filter-range"></div>
          </div>

          <div class="test-card">
            <h3>Filtro Complejo</h3>
            <p>Todos los filtros combinados</p>
            <button class="btn" onclick="runFilterTest('complex')">Ejecutar</button>
            <div id="result-filter-complex"></div>
          </div>
        </div>
      </div>

      <!-- Secci√≥n de M√©tricas Globales -->
      <div class="section">
        <h2>üìà M√©tricas Globales</h2>
        <div class="results" id="global-metrics">
          <p style="color: #999; text-align: center;">Ejecuta pruebas para ver m√©tricas</p>
        </div>
      </div>

      <!-- Consola de Salida -->
      <div class="section">
        <h2>üíª Consola de Salida</h2>
        <div class="console-output" id="console">
          <div class="console-line info">Sistema de pruebas inicializado...</div>
          <div class="console-line">Listo para ejecutar pruebas de rendimiento</div>
        </div>
      </div>

      <!-- Acciones Globales -->
      <div class="actions">
        <button class="btn btn-success" onclick="runAllTests()">‚ñ∂Ô∏è Ejecutar Todas las Pruebas</button>
        <button class="btn btn-secondary" onclick="clearResults()">üóëÔ∏è Limpiar Resultados</button>
        <button class="btn btn-danger" onclick="exportResults()">üì• Exportar Resultados</button>
      </div>
    </div>
  </div>

  <script>
    // Simulaci√≥n de pruebas de rendimiento
    const testResults = {
      load: {},
      filter: {}
    };

    function log(message, type = 'info') {
      const console = document.getElementById('console');
      const line = document.createElement('div');
      line.className = `console-line ${type}`;
      line.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
      console.appendChild(line);
      console.scrollTop = console.scrollHeight;
    }

    function runLoadTest(size) {
      const sizes = {
        small: 50,
        medium: 250,
        large: 1000,
        xlarge: 5000
      };

      const count = sizes[size];
      log(`Iniciando prueba de carga: ${count} resoluciones`, 'info');

      const startTime = performance.now();
      
      // Simular carga de datos
      setTimeout(() => {
        const endTime = performance.now();
        const duration = endTime - startTime;
        
        // Calcular m√©tricas simuladas
        const loadTime = duration;
        const renderTime = Math.random() * 100 + 50;
        const memoryUsage = count * 0.5; // MB aproximados

        testResults.load[size] = {
          count,
          loadTime,
          renderTime,
          memoryUsage,
          timestamp: new Date()
        };

        displayLoadResult(size, testResults.load[size]);
        updateGlobalMetrics();
        
        log(`‚úÖ Prueba completada: ${count} resoluciones en ${loadTime.toFixed(2)}ms`, 'success');
      }, Math.random() * 1000 + 500);
    }

    function displayLoadResult(size, result) {
      const container = document.getElementById(`result-${size}`);
      
      const loadClass = result.loadTime < 1000 ? 'good' : result.loadTime < 2000 ? 'warning' : 'bad';
      const renderClass = result.renderTime < 100 ? 'good' : result.renderTime < 300 ? 'warning' : 'bad';
      
      container.innerHTML = `
        <div class="results">
          <div class="metric">
            <span class="metric-label">Tiempo de carga:</span>
            <span class="metric-value ${loadClass}">${result.loadTime.toFixed(2)}ms</span>
          </div>
          <div class="metric">
            <span class="metric-label">Tiempo de render:</span>
            <span class="metric-value ${renderClass}">${result.renderTime.toFixed(2)}ms</span>
          </div>
          <div class="metric">
            <span class="metric-label">Memoria usada:</span>
            <span class="metric-value">${result.memoryUsage.toFixed(2)}MB</span>
          </div>
          <div class="status success">‚úì Completado</div>
        </div>
      `;
    }

    function runFilterTest(type) {
      const types = {
        simple: 'Filtro Simple',
        multiple: 'Filtro M√∫ltiple',
        range: 'Filtro de Rango',
        complex: 'Filtro Complejo'
      };

      log(`Ejecutando: ${types[type]}`, 'info');

      const startTime = performance.now();
      
      setTimeout(() => {
        const endTime = performance.now();
        const duration = endTime - startTime;
        
        const resultCount = Math.floor(Math.random() * 500) + 50;
        const datasetSize = 1000;

        testResults.filter[type] = {
          executionTime: duration,
          resultCount,
          datasetSize,
          efficiency: (resultCount / datasetSize) * 100,
          timestamp: new Date()
        };

        displayFilterResult(type, testResults.filter[type]);
        updateGlobalMetrics();
        
        log(`‚úÖ Filtro completado: ${resultCount} resultados en ${duration.toFixed(2)}ms`, 'success');
      }, Math.random() * 500 + 200);
    }

    function displayFilterResult(type, result) {
      const container = document.getElementById(`result-filter-${type}`);
      
      const timeClass = result.executionTime < 300 ? 'good' : result.executionTime < 500 ? 'warning' : 'bad';
      
      container.innerHTML = `
        <div class="results">
          <div class="metric">
            <span class="metric-label">Tiempo:</span>
            <span class="metric-value ${timeClass}">${result.executionTime.toFixed(2)}ms</span>
          </div>
          <div class="metric">
            <span class="metric-label">Resultados:</span>
            <span class="metric-value">${result.resultCount}</span>
          </div>
          <div class="metric">
            <span class="metric-label">Eficiencia:</span>
            <span class="metric-value">${result.efficiency.toFixed(1)}%</span>
          </div>
          <div class="status success">‚úì Completado</div>
        </div>
      `;
    }

    function updateGlobalMetrics() {
      const container = document.getElementById('global-metrics');
      
      const loadTests = Object.values(testResults.load);
      const filterTests = Object.values(testResults.filter);
      
      if (loadTests.length === 0 && filterTests.length === 0) {
        return;
      }

      let html = '<h3>Resumen de Rendimiento</h3>';
      
      if (loadTests.length > 0) {
        const avgLoadTime = loadTests.reduce((sum, t) => sum + t.loadTime, 0) / loadTests.length;
        const avgRenderTime = loadTests.reduce((sum, t) => sum + t.renderTime, 0) / loadTests.length;
        const totalMemory = loadTests.reduce((sum, t) => sum + t.memoryUsage, 0);
        
        html += `
          <div class="metric">
            <span class="metric-label">Tiempo de carga promedio:</span>
            <span class="metric-value">${avgLoadTime.toFixed(2)}ms</span>
          </div>
          <div class="metric">
            <span class="metric-label">Tiempo de render promedio:</span>
            <span class="metric-value">${avgRenderTime.toFixed(2)}ms</span>
          </div>
          <div class="metric">
            <span class="metric-label">Memoria total usada:</span>
            <span class="metric-value">${totalMemory.toFixed(2)}MB</span>
          </div>
        `;
      }
      
      if (filterTests.length > 0) {
        const avgFilterTime = filterTests.reduce((sum, t) => sum + t.executionTime, 0) / filterTests.length;
        const avgResults = filterTests.reduce((sum, t) => sum + t.resultCount, 0) / filterTests.length;
        
        html += `
          <div class="metric">
            <span class="metric-label">Tiempo de filtro promedio:</span>
            <span class="metric-value">${avgFilterTime.toFixed(2)}ms</span>
          </div>
          <div class="metric">
            <span class="metric-label">Resultados promedio:</span>
            <span class="metric-value">${avgResults.toFixed(0)}</span>
          </div>
        `;
      }
      
      html += `
        <div class="metric">
          <span class="metric-label">Total de pruebas:</span>
          <span class="metric-value">${loadTests.length + filterTests.length}</span>
        </div>
      `;
      
      container.innerHTML = html;
    }

    function runAllTests() {
      log('üöÄ Iniciando suite completa de pruebas...', 'info');
      
      const tests = [
        () => runLoadTest('small'),
        () => runLoadTest('medium'),
        () => runLoadTest('large'),
        () => runLoadTest('xlarge'),
        () => runFilterTest('simple'),
        () => runFilterTest('multiple'),
        () => runFilterTest('range'),
        () => runFilterTest('complex')
      ];
      
      tests.forEach((test, index) => {
        setTimeout(test, index * 1500);
      });
      
      setTimeout(() => {
        log('‚úÖ Suite de pruebas completada', 'success');
      }, tests.length * 1500 + 1000);
    }

    function clearResults() {
      testResults.load = {};
      testResults.filter = {};
      
      document.querySelectorAll('[id^="result-"]').forEach(el => {
        el.innerHTML = '';
      });
      
      document.getElementById('global-metrics').innerHTML = 
        '<p style="color: #999; text-align: center;">Ejecuta pruebas para ver m√©tricas</p>';
      
      document.getElementById('console').innerHTML = `
        <div class="console-line info">Resultados limpiados</div>
        <div class="console-line">Listo para nuevas pruebas</div>
      `;
      
      log('üóëÔ∏è Resultados limpiados', 'warning');
    }

    function exportResults() {
      const data = {
        timestamp: new Date().toISOString(),
        loadTests: testResults.load,
        filterTests: testResults.filter
      };
      
      const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `performance-results-${Date.now()}.json`;
      a.click();
      
      log('üì• Resultados exportados exitosamente', 'success');
    }

    // Mensaje inicial
    log('Sistema listo para pruebas de rendimiento', 'success');
  </script>
</body>
</html>
